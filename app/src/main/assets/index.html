<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no"/>
    <title>webView-native</title>
    <script src="js/jquery.js"></script>
    <style type="text/css">
        img {
        max-width: 100%;
        }
        div {
        margin-top: 20px;
        }
    </style>
</head>


<body>
<div class="wrap">
    <div><button id="test">测试按钮</button></div>
    <div><input type="button" id="startServer" value="开启TCP服务"/><input type="button" id="stopServer" value="关闭TCP服务"/></div>
    <div><input type="button" id="udpStartServer" value="开启udp服务"/><input type="button" id="sendUdp" value="发送udp广播"/></div>
    <div></div>
    <button id="controller">连接TCP以控制灯具</button>
    <div></div>
    <div><button class="controller" id="greenOn">绿色开</button><button class="controller" id="greenOff">绿色关</button></div>
    <div><button  id="sendCode">自动测试</button><button class="controller" id="opOff">紫外线关</button></div>
    <div><a href="ap_list.html">界面转换</a></div>

</div>


</body>
<script>
    $('#test').click(function(){
        var value={"abx":"123","def":"456"}
        var str=JSON.stringify(value);
        alert(str);
        var v=window.wifi.test(str);
        var obj=eval("("+v+")")
        alert(obj.abx);
    });
    $('#sendUdp').click(function(){
        window.wifi.sendUdp();
    })

    $('#startServer').click(function(){
        var int=window.wifi.startServer();
    })
    $('#stopServer').click(function(){
        window.wifi.stopServer();
    });
    $('#controller').click(function(){
        window.wifi.initSocket();
    });
    $('#udpStartServer').click(function(){
        window.wifi.startUdpServer();
    });
    $('#sendCode').click(function(){
        var data={color:5,time:0,level:100}
        var str=JSON.stringify(data)
        alert(str);
        window.wifi.sendCode(str);
    });

    $('.controller').click(function(){
        var id=$(this).attr('id');
                switch(id){
            case 'greenOn':
                window.wifi.greenOn();
                break;
            case 'greenOff':
                window.wifi.greenOff();
                break;
            case 'redOff':
                window.wifi.redOff();
                break;
            case 'redOn':
                window.wifi.redOn();
                break;
            case 'blueOff':
                window.wifi.blueOff();
                break;
            case 'blueOn':
                window.wifi.blueOn();
                break;
            case 'sblueOff':
                window.wifi.sblueOff();
                break;
            case 'sblueOn':
                window.wifi.sblueOn();
                break;
            case 'purpleOn':
                window.wifi.purpleOn();
                break;
            case 'purpleOff':
                window.wifi.purpleOff();
                break;
            case 'whiteOn':
                window.wifi.whiteOn();
                break;
            case 'whiteOff':
                window.wifi.whiteOff();
                break;
            case 'opOff':
                window.wifi.opOff();
                break;
            case 'opOn':
                window.wifi.opOn();
                break;
        }
    })

</script>
<script>
    function headerTo(url){
        window.location.href=url;
    };

</script>


</html>